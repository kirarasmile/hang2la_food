import{g as w,h as m,a as M,az as N,_ as x,b2 as B,n as S,bv as E,k as p,m as y,bw as D,z as j,M as I,K as P,N as $,bo as H,D as k,C as z,H as V,J as q,P as A}from"./index-CjeBonZK.js";import{N as F,R as J}from"./RestaurantForm-D4_gy_2e.js";import{u as K,_ as U}from"./_plugin-vue_export-helper-C6VD7rnw.js";const te=w({name:"ChevronRight",render(){return m("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}}),Z=M("ellipsis",{overflow:"hidden"},[N("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),x("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),x("cursor-pointer",`
 cursor: pointer;
 `)]);function R(t){return`${t}-ellipsis--line-clamp`}function T(t,l){return`${t}-ellipsis--cursor-${l}`}const G=Object.assign(Object.assign({},S.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),se=w({name:"Ellipsis",inheritAttrs:!1,props:G,slots:Object,setup(t,{slots:l,attrs:o}){const n=B(),r=S("Ellipsis","-ellipsis",Z,E,t,n),u=p(null),g=p(null),f=p(null),c=p(!1),i=y(()=>{const{lineClamp:e}=t,{value:s}=c;return e!==void 0?{textOverflow:"","-webkit-line-clamp":s?"":e}:{textOverflow:s?"":"ellipsis","-webkit-line-clamp":""}});function v(){let e=!1;const{value:s}=c;if(s)return!0;const{value:a}=u;if(a){const{lineClamp:d}=t;if(_(a),d!==void 0)e=a.scrollHeight<=a.offsetHeight;else{const{value:b}=g;b&&(e=b.getBoundingClientRect().width<=a.getBoundingClientRect().width)}L(a,e)}return e}const C=y(()=>t.expandTrigger==="click"?()=>{var e;const{value:s}=c;s&&((e=f.value)===null||e===void 0||e.setShow(!1)),c.value=!s}:void 0);D(()=>{var e;t.tooltip&&((e=f.value)===null||e===void 0||e.setShow(!1))});const O=()=>m("span",Object.assign({},j(o,{class:[`${n.value}-ellipsis`,t.lineClamp!==void 0?R(n.value):void 0,t.expandTrigger==="click"?T(n.value,"pointer"):void 0],style:i.value}),{ref:"triggerRef",onClick:C.value,onMouseenter:t.expandTrigger==="click"?v:void 0}),t.lineClamp?l:m("span",{ref:"triggerInnerRef"},l));function _(e){if(!e)return;const s=i.value,a=R(n.value);t.lineClamp!==void 0?h(e,a,"add"):h(e,a,"remove");for(const d in s)e.style[d]!==s[d]&&(e.style[d]=s[d])}function L(e,s){const a=T(n.value,"pointer");t.expandTrigger==="click"&&!s?h(e,a,"add"):h(e,a,"remove")}function h(e,s,a){a==="add"?e.classList.contains(s)||e.classList.add(s):e.classList.contains(s)&&e.classList.remove(s)}return{mergedTheme:r,triggerRef:u,triggerInnerRef:g,tooltipRef:f,handleClick:C,renderTrigger:O,getTooltipDisabled:v}},render(){var t;const{tooltip:l,renderTrigger:o,$slots:n}=this;if(l){const{mergedTheme:r}=this;return m(F,Object.assign({ref:"tooltipRef",placement:"top"},l,{getDisabled:this.getTooltipDisabled,theme:r.peers.Tooltip,themeOverrides:r.peerOverrides.Tooltip}),{trigger:o,default:(t=n.tooltip)!==null&&t!==void 0?t:n.default})}else return o()}}),Q={key:0},W=w({__name:"EditRestaurantModal",props:{show:{type:Boolean},restaurant:{}},emits:["update:show","success"],setup(t,{emit:l}){const o=t,n=l,r=K(),u=p(!1);async function g(c){if(o.restaurant){u.value=!0;try{const{error:i}=await A.from("restaurants").update({...c,updated_at:new Date().toISOString()}).eq("id",o.restaurant.id);if(i)throw i;r.success("修改成功"),n("success"),n("update:show",!1)}catch(i){r.error("修改失败: "+i.message)}finally{u.value=!1}}}function f(){n("update:show",!1)}return(c,i)=>(k(),I($(H),{show:t.show,"onUpdate:show":i[0]||(i[0]=v=>n("update:show",v)),preset:"card",title:"编辑餐厅信息",style:{"max-width":"800px","max-height":"90vh","overflow-y":"auto"},class:"edit-modal"},{default:P(()=>[t.restaurant?(k(),z("div",Q,[q(J,{"initial-data":t.restaurant,onSubmit:g,onCancel:f},null,8,["initial-data"])])):V("",!0)]),_:1},8,["show"]))}}),ne=U(W,[["__scopeId","data-v-589b9c26"]]);export{te as C,ne as E,se as N,T as a,R as c,G as e,Z as s};
